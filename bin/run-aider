#!/usr/bin/env nu

let is_dark_mode = (^gsettings get org.gnome.desktop.interface color-scheme | str contains dark)
$env.AIDER_DARK_MODE = $is_dark_mode
$env.AIDER_LIGHT_MODE = (not $is_dark_mode)
$env.AIDER_CODE_THEME = if ($is_dark_mode) { "solarized-dark" } else { "solarized-light" }

def --wrapped "main qewn flash" [...rest] {
  (^aider
    --model openai/qwen3-coder-flash
    --no-show-model-warnings
    --edit-format whole
    ...$rest)
}

def --wrapped "main qwen plus" [...rest] {
  (^aider
    --model openai/qwen3-coder-plus
    --no-show-model-warnings
    --weak-model openai/qwen3-coder-flash
    --edit-format whole
    ...$rest)
}

def --wrapped "main qwen max" [...rest] {
  (^aider
    --model openai/qwen3-max
    --no-show-model-warnings
    --editor-model openai/qwen3-coder-plus
    --weak-model openai/qwen3-coder-flash
    --edit-format whole
    --editor-edit-format whole
    ...$rest)
}

def --wrapped "main gemini flash" [...rest] {
  proxychains -q aider --model gemini/gemini-3-flash-preview ...$rest
}

def main [] {
  r#'run with "plus", "flash" or "max" argument'#
}
